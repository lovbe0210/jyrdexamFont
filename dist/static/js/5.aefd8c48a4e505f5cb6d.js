webpackJsonp([5],{"2xuw":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("LYZK"),n={data:function(){return{userInfo:{},myExamList:[],scoreShow:!1,pwdShow:!1,loading:!1,finished:!1,password:{userId:"",beforePwd:"",nowpwd:"",confirmNowPwd:""},pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/}},created:function(){this.getUserInfo(this.$route.query.userId)},methods:{getUserInfo:function(t){var a=this;s.a.getUserById(t).then(function(t){t.data.succ&&(a.userInfo=t.data.data)})},showExamScore:function(){var t=this;s.a.getMyExam(this.$route.query.userId).then(function(a){a.data.succ&&(t.myExamList=a.data.data,t.scoreShow=!0)})},updatePassword:function(){this.pwdShow=!0},loginOut:function(){var t=this;this.$dialog.confirm({message:"确认退出登录？"}).then(function(){s.a.loginOut().then(function(a){a.data.succ&&t.$router.push({path:"/login"})})}).catch(function(){})},onLoad:function(){this.finished=!0},validator:function(t){return this.password.nowpwd===this.password.confirmNowPwd},onSubmit:function(){var t=this;this.password.userId=this.userInfo.id,s.a.updatePwd(this.password).then(function(a){a.data.succ?(t.pwdShow=!1,t.$toast.success(a.data.msg)):t.$toast.fail(a.data.msg)})},reload:function(){this.password={}}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"mineEntry"}},[e("div",{staticClass:"avatar-wrapper"},[e("div",{staticClass:"img"},[e("router-link",{attrs:{to:{name:"mineSetting"}}},[e("img",{attrs:{src:t.userInfo.avatarUrl}})])],1)]),t._v(" "),e("div",{staticClass:"list"},[e("van-cell-group",[e("van-cell",{attrs:{title:"账号",value:t.userInfo.loginName,size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"部门",value:t.userInfo.departmentName,size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"姓名",value:t.userInfo.realName,size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"考试成绩","is-link":"","arrow-direction":"down",size:"large"},on:{click:function(a){return t.showExamScore()}}}),t._v(" "),e("van-action-sheet",{attrs:{title:"考试成绩"},model:{value:t.scoreShow,callback:function(a){t.scoreShow=a},expression:"scoreShow"}},[e("div",{staticClass:"examScore"},[e("van-row",{staticClass:"title",attrs:{gutter:"5"}},[e("van-col",{attrs:{span:"11"}},[t._v("考试名称")]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v("分数")]),t._v(" "),e("van-col",{attrs:{span:"5"}},[t._v("用时")]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v("排名")])],1),t._v(" "),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.myExamList,function(a){return e("van-row",{key:a.id,attrs:{gutter:"5"}},[e("van-col",{attrs:{span:"11"}},[t._v(t._s(a.examName))]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v(t._s(a.maxScore+"分"))]),t._v(" "),e("van-col",{attrs:{span:"5"}},[t._v(t._s(a.totalDuration))]),t._v(" "),a.sort?e("van-col",{attrs:{span:"4"}},[t._v(t._s(a.sort))]):e("van-col",{attrs:{span:"4"}},[t._v("暂无排名")])],1)}),1)],1)]),t._v(" "),e("van-cell",{attrs:{title:"手机","is-link":"",to:"/phoneNum",value:"点击绑定","value-class":"rignt",size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"微信","is-link":"",to:"/weChat",value:"点击绑定","value-class":"rignt",size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"邮箱","is-link":"",to:"/email",value:"点击绑定","value-class":"rignt",size:"large",center:""}}),t._v(" "),e("van-cell",{attrs:{title:"修改密码","is-link":"",size:"large"},on:{click:function(a){return t.updatePassword()}}}),t._v(" "),e("van-action-sheet",{attrs:{title:"修改密码"},on:{close:function(a){return t.reload()}},model:{value:t.pwdShow,callback:function(a){t.pwdShow=a},expression:"pwdShow"}},[e("div",{staticClass:"updatePwd"},[e("van-form",{attrs:{"validate-first":""},on:{submit:t.onSubmit}},[e("van-field",{attrs:{placeholder:"请输入原密码",type:"password",rules:[{required:!0}]},model:{value:t.password.beforePwd,callback:function(a){t.$set(t.password,"beforePwd",a)},expression:"password.beforePwd"}}),t._v(" "),e("van-field",{attrs:{rules:[{pattern:t.pattern,message:"包含一个大写字母和数字8-20位"}],type:"password",placeholder:"请输入新密码(包含一个大写字母和数字8-20位)"},model:{value:t.password.nowpwd,callback:function(a){t.$set(t.password,"nowpwd",a)},expression:"password.nowpwd"}}),t._v(" "),e("van-field",{attrs:{rules:[{validator:t.validator,message:"两次输入密码不一致"}],type:"password",placeholder:"请再次输入新密码(包含一个大写字母和数字8-20位)"},model:{value:t.password.confirmNowPwd,callback:function(a){t.$set(t.password,"confirmNowPwd",a)},expression:"password.confirmNowPwd"}}),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)]),t._v(" "),e("van-cell",{attrs:{title:"退出登录","is-link":"",size:"large"},on:{click:function(a){return t.loginOut()}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"share"}})]},proxy:!0}])})],1)],1)])},staticRenderFns:[]};var r=e("VU/8")(n,o,!1,function(t){e("ZNJC")},null,null);a.default=r.exports},ZNJC:function(t,a){}});
//# sourceMappingURL=5.aefd8c48a4e505f5cb6d.js.map