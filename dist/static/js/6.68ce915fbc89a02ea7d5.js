webpackJsonp([6],{TabA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mtWM"),s=a.n(n),r=a("LYZK"),i={data:function(){return{userInfo:{workNum:"",realName:"",departmentId:"",avatarUrl:""},gender:!0,depts:[],showDepart:"",showPicker:!1,flag:!1}},created:function(){this.getdepartList(),this.getUserInfo(this.$route.query.userId)},methods:{getdepartList:function(){var t=this;r.a.getdepartList().then(function(e){e.data.succ&&(t.depts=e.data.data)})},onConfirm:function(t){this.showDepart=t.deptName,this.userInfo.departmentId=t.id,this.userInfo.departmentName=t.deptName,this.showPicker=!1},getUserInfo:function(t){var e=this;r.a.getUserById(t).then(function(t){t.data.succ&&(e.userInfo=t.data.data,e.showDepart=e.userInfo.departmentName)})},afterRead:function(t){var e=this;t.status="uploading",t.message="上传中...";var a=t.file,n=new FormData;n.append("file",a),s()({method:"Post",url:"http://192.168.1.8:9527/ucenter/fileUpload",headers:{"Content-Type":"multipart/form-data"},data:n}).then(function(a){a.data.succ?(t.status="",t.message="",e.userInfo.avatarUrl=a.data.data):(t.status="failed",t.message="上传失败")})},beforeRead:function(t){return"image/jpeg"===t.type||"image/png"===t.type||(this.$toast("请上传 jpg/png 格式图片"),!1)},onOversize:function(t){this.$toast("文件大小不能超过 10MB")},returnBtn:function(){this.$router.push("/mine/entry")},updateBtn:function(){var t=this;r.a.updateUserInfo(this.userInfo).then(function(e){e.data.succ&&t.$toast.success("个人信息修改成功")})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mineSetting"}},[a("div",{staticClass:"header-title"},[t._v("个人信息")]),t._v(" "),a("van-cell-group",{staticClass:"top-cell-group"},[a("van-uploader",{attrs:{"max-count":"1",name:"file","max-size":1073741824,"after-read":t.afterRead,"before-read":t.beforeRead},on:{oversize:t.onOversize}},[a("van-row",{staticClass:"avatar"},[a("van-col",{staticClass:"text",attrs:{span:"7"}},[a("van-field",{attrs:{label:"头像"}})],1),t._v(" "),a("van-col",{staticClass:"img",attrs:{span:"4"}},[a("img",{staticStyle:{width:"65px",height:"65"},attrs:{src:t.userInfo.avatarUrl}})]),t._v(" "),a("van-col",[a("van-icon",{staticClass:"icon",attrs:{name:"photograph",size:"20"}})],1)],1)],1),t._v(" "),a("van-field",{attrs:{label:"姓名",value:t.userInfo.realName,"input-align":"center"},model:{value:t.userInfo.realName,callback:function(e){t.$set(t.userInfo,"realName",e)},expression:"userInfo.realName"}}),t._v(" "),a("van-field",{attrs:{label:"姓名",value:t.userInfo.workNum,"input-align":"center"},model:{value:t.userInfo.workNum,callback:function(e){t.$set(t.userInfo,"workNum",e)},expression:"userInfo.workNum"}}),t._v(" "),a("van-row",{staticClass:"input"},[a("van-col",[a("van-field",{attrs:{readonly:"","input-align":"center",label:"部门",clickable:"",value:"                    "+t.showDepart,rules:[{required:!0}]},on:{click:function(e){t.showPicker=!0}}}),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.depts,"value-key":"deptName","default-index":"0"},on:{confirm:t.onConfirm,cancel:function(e){t.showPicker=!1}}})],1),t._v(" "),a("div",{staticClass:"right"})],1)],1)],1),t._v(" "),a("van-cell-group",{staticClass:"help-cell-group"},[a("van-cell",{attrs:{icon:"question",title:"联系维护",size:"large","is-link":""}},[t._v("\n      +86 1537998xxxx\n    ")]),t._v(" "),a("van-cell",{attrs:{icon:"question",title:"问答中心",size:"large","is-link":""}}),t._v(" "),a("van-cell",{attrs:{icon:"question",title:"关于我们",size:"large","is-link":""}})],1),t._v(" "),a("van-button",{staticClass:"returnBtn",attrs:{round:"",type:"default",size:"large"},on:{click:t.returnBtn}},[t._v("返回")]),t._v(" "),a("van-button",{staticClass:"confirmBtn",attrs:{disabled:t.flag,round:"",type:"info",size:"large"},on:{click:t.updateBtn}},[t._v("确认修改")])],1)},staticRenderFns:[]};var l=a("VU/8")(i,o,!1,function(t){a("zoC+")},null,null);e.default=l.exports},"zoC+":function(t,e){}});
//# sourceMappingURL=6.68ce915fbc89a02ea7d5.js.map